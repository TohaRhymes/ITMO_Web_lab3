<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Lab 3</title>
    <link rel="stylesheet" href="static/styles/main.css"/>
</h:head>
<h:body>
    <div class="header">
        <div id="logo">
            <a href="http://se.ifmo.ru" target="_blank"> <img src="static/img/vt-logo.png" alt="logo" id="logoimg"/></a><br/>
        </div>
        <div id="info">
            <p><a href="https://github.com/TohaRhymes">Changalidi Anton</a></p>
            <p>P3214</p>
            <p>Lab3 Variant 21905</p>
        </div>
    </div>
    <div class="main" id="main-form">>
        <h:panelGrid columns="2" width="100%">
            <h:panelGroup>
                <h:form>

                    <h2>Choose radius R</h2>
                    <p:selectOneMenu id="r" value="#{checker.r}" required="true" styleClass="button"
                                     requiredMessage="You haven't chose!" onchange="handleRChange(event)">
                        <f:selectItem itemValue="1" itemLabel="1"/>
                        <f:selectItem itemValue="1.5" itemLabel="1.5"/>
                        <f:selectItem itemValue="2" itemLabel="2"/>
                        <f:selectItem itemValue="2.5" itemLabel="2.5"/>
                        <f:selectItem itemValue="3" itemLabel="3"/>
                        <f:ajax event="change" render="r submit"/>
                    </p:selectOneMenu>
                    <h:message for="r" styleClass="warn"/><br/>


                    <h2>Choose x-coordinate</h2>
                    <p:selectOneRadio id="x" value="#{checker.x}" required="true" styleClass="button"
                                      requiredMessage="You haven't chose!" layout="grid" columns="3">
                        <!--                                      onchange="handleXChange(event)">-->
                        >
                        <f:selectItem itemValue="-3.0" itemLabel="-3"/>
                        <f:selectItem itemValue="-2.0" itemLabel="-2"/>
                        <f:selectItem itemValue="-1.0" itemLabel="-1"/>
                        <f:selectItem itemValue="0.0" itemLabel="0"/>
                        <f:selectItem itemValue="1.0" itemLabel="1"/>
                        <f:selectItem itemValue="2.0" itemLabel="2"/>
                        <f:selectItem itemValue="3.0" itemLabel="3"/>
                        <f:selectItem itemValue="4.0" itemLabel="4"/>
                        <f:selectItem itemValue="5.0" itemLabel="5"/>
                    </p:selectOneRadio>
                    <h:message for="x" styleClass="warn"/>

<!--                    <h:inputHidden id="xx" value="#{checker.x}" required="true" requiredMessage="You haven't chose!"/>-->
<!--                    <table id="yIn" border="5px">-->
<!--                        <tr>-->
<!--                            <td><h:commandLink id="x-3" styleClass="link" value="-3" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x-2" styleClass="link" value="-2" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x-1" styleClass="link" value="-1" onclick="return false"/></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td><h:commandLink id="x0" styleClass="link" value="0" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x1" styleClass="link" value="1" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x2" styleClass="link" value="2" onclick="return false"/></td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td><h:commandLink id="x3" styleClass="link" value="3" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x4" styleClass="link" value="4" onclick="return false"/></td>-->
<!--                            <td><h:commandLink id="x5" styleClass="link" value="5" onclick="return false"/></td>-->
<!--                        </tr>-->
<!--                    </table>-->
<!--                    <span id="warningX" style="color:red; font-size: 90%"> </span>-->


                    <h2>Input y-coordinate</h2>
                    <p:inputText id="y" value="#{checker.y}" required="true" requiredMessage="Empty field."
                                 validatorMessage="Out of range!" converterMessage="It's not a digit"
                                 placeholder="from -3 to 3.">
                        <f:validateDoubleRange minimum="-3.0" maximum="3.0"/>
                        <f:ajax event="keyup" render="errY submit"/>
                    </p:inputText><br/>

                    <input type="button" class="history-button button" onclick='location.href="home.xhtml"' value="Start Page"/>
                    <h:message for="y" id="errY" styleClass="warn"/>
                    <h:commandButton id="submit" styleClass="submit-button button" action="#{checker.check}" value="Check"
                                     disabled="#{!checker.ready}">
<!--                        <p:ajax execute="@main-form" update="result-table" oncomplete="handleSubmit()"/>-->
                    </h:commandButton>
                </h:form>
<!--                <h:form>-->
<!--                    <input type="button" class="history-button button" onclick='location.href="home.xhtml"' value="Start Page"/>-->
<!--                </h:form>-->



            </h:panelGroup>
<!--            <h:panelGroup style="float:right;">-->

<!--                <div id="canvas-div">-->
<!--                    <h:form id="canvas-form">-->
<!--                        <h:inputHidden id="xCanvas" value="#{checker.xCanvas}"/>-->
<!--                        <h:inputHidden id="yCanvas" value="#{checker.yCanvas}"/>-->
<!--                        <canvas id="canvas" width="400px" height="400px" onclick="handleCanvasClick(event)"/>-->
<!--                        <p:remoteCommand name="checkCanvas" action="#{checker.canvasCheck}"-->
<!--                                         update="result-table beanData"-->
<!--                                         oncomplete="drawPoint(xBean, yBean, resBean==='Да'? 'lime' : 'red');"/>-->
<!--                        <p:remoteCommand name="checkResize" action="#{checker.resizeCheck}" update="beanData"-->
<!--                                         oncomplete="drawPoint(xBean, yBean, resBean==='Да'? 'lime' : 'red'); drawStep()"/>-->
<!--                        <h:panelGroup id="beanData">-->
<!--                            <script type="text/javascript">xBean = '#{checker.xCanvas}';-->
<!--                            yBean = '#{checker.yCanvas}';-->
<!--                            resBean = '#{checker.resizeResult}'</script>-->
<!--                        </h:panelGroup>-->
<!--                    </h:form>-->
<!--                </div>-->
<!--            </h:panelGroup>-->
        </h:panelGrid>
        <h1>request history</h1>
        <h:dataTable value="#{data.points}" id="result-table" var="p" width="100%">
            <h:column>
                <f:facet name="header">
                    x-coordinate
                </f:facet>
                #{p.x}
            </h:column>
            <h:column>
                <f:facet name="header">
                    y-coordinate
                </f:facet>
                #{p.y}
            </h:column>
            <h:column>
                <f:facet name="header">
                    Radius
                </f:facet>
                #{p.r}
            </h:column>
            <h:column>
                <f:facet name="header">
                    Hit?
                </f:facet>
                #{p.ischeck}
            </h:column>
            <h:column>
                <f:facet name="header">
                    Time
                </f:facet>
                #{p.date}
            </h:column>
        </h:dataTable>




    </div>
    <script src="static/scripts/drawing.js" type="text/javascript"></script>
    <script src="static/scripts/main.js" type="text/javascript"></script>
</h:body>
</html>